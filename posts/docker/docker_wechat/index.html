<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=HandheldFriendly content="True"><meta http-equiv=x-ua-compatible content="IE=edge"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=generator content="Hugo 0.101.0"><link rel="shortcut icon" href=/images/angela.jpg><title>Set up WeChat on Linux with Docker - Blog of retrhelo</title><meta name=author content="retrhelo"><meta name=keywords content="docker"><meta property="og:title" content="Set up WeChat on Linux with Docker"><meta name=twitter:title content="Set up WeChat on Linux with Docker"><meta property="og:type" content="article"><meta property="og:url" content="https://retrhelo.github.io/posts/docker/docker_wechat/"><meta property="og:description" content="WeChat is a popular IM (Instant Message) software in China, and is widely used
in business situations. However, Tecent, the corporation behind WeChat, serves
to provide no support for this popular app in Linux environment."><meta name=twitter:description content="WeChat is a popular IM (Instant Message) software in China, and is widely used
in business situations. However, Tecent, the corporation behind WeChat, serves
to provide no support for this popular app in Linux environment."><meta name=twitter:card content="summary"><meta property="article:published_time" content="2022-06-18T23:12:49+08:00"><meta property="article:modified_time" content="2022-06-18T23:12:49+08:00"><style>@media(prefers-color-scheme:dark){body[data-theme=auto] img{filter:brightness(60%)}}body[data-theme=dark] img{filter:brightness(60%)}</style><link rel=stylesheet href=https://retrhelo.github.io/assets/css/fuji.min.css></head><body data-theme=auto data-theme-auto=true><script data-cfasync=false>var fujiThemeData=localStorage.getItem("fuji_data-theme");fujiThemeData?fujiThemeData!=="auto"&&document.body.setAttribute("data-theme",fujiThemeData==="dark"?"dark":"light"):localStorage.setItem("fuji_data-theme","auto")</script><header><div class="container-lg clearfix"><div class="col-12 header"><a class=title-main href=https://retrhelo.github.io>Blog of retrhelo</a>
<span class=title-sub>Peace within.</span></div></div></header><main><div class="container-lg clearfix"><div class="col-12 col-md-9 float-left content"><article><h2 class="post-item post-title"><a href=https://retrhelo.github.io/posts/docker/docker_wechat/>Set up WeChat on Linux with Docker</a></h2><div class="post-item post-meta"><span><i class="iconfont icon-today-sharp"></i>&nbsp;2022-06-18</span>
<span><i class="iconfont icon-pricetags-sharp"></i>&nbsp;<a href=/tags/docker>docker</a>&nbsp;</span></div><div class="post-content markdown-body"><p>WeChat is a popular IM (Instant Message) software in China, and is widely used
in business situations. However, Tecent, the corporation behind WeChat, serves
to provide no support for this popular app in Linux environment.</p><p>In this article, I introduce how I set up my WeChat environment on my Fedora 36,
with the help of docker and wine.</p><h2 id=docker-setup>Docker setup</h2><p>How I set docker environment up on my machine is not part of the article.
Related contents can be easily found on the Internet, thus not mentions here.</p><h2 id=find-the-docker-image>Find the docker image</h2><p>There&rsquo;s already existing docker image that serves to provide WeChat on docker.
It&rsquo;s <a href=https://github.com/huan/docker-wechat target=_blank><em>DoChat</em></a> provided by Huan. The author provides an easy script for the
whole installation, which I browsed and then wrote this article.</p><p>The docker image to use is <code>zixia/wechat</code>. To pull it down from remote, use</p><pre><code class=language-bash>docker pull zixia/wechat:latest
</code></pre><p>It took a while to get everything ready, depending on the network.</p><h2 id=create-docker-container>Create docker container</h2><p>Container is the instance of certain image. To create a container, use
<code>docker run</code>. Here, to create my docker image, I use</p><pre><code class=language-bash>docker run \
    -i \
    --name wechat \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -v &quot;$HOME/Downloads/wechat&quot;:'/home/user/WeChat Files' \
    -e DISPLAY \
    -e DOCHAT_DEBUG \
    -e DOCHAT_DPI \
    -e XMODIFIERS=@im=ibus \
    -e GTK_IM_MODULE=ibus \
    -e QT_IM_MODULE=ibus \
    --ipc=host \
    --privileged \
    zixia/wechat:latest
</code></pre><p>There are lots of details to be told in the above command. Here I introduce
how we create a file-sharing fold to transfer files between the host and the
container.</p><h3 id=set-up-a-sharing-folder>Set up a sharing folder</h3><p>You may notice that I use the argument <code>-v</code> frequently &ndash; This flag is the key
to create a sharing folder. In the official document, <code>-v</code> is used to
<em>bind mount a volume</em>, which preserves a folder to be shared between the host
and container.</p><p>By using this, I set the container to share <code>/home/user/WeChat Files</code> folder
with the host, where WeChat stores the files received.</p><h3 id=enable-input-method>Enable input method</h3><p>Some environments should be set when creating the container, for the input
method to work properly. They&rsquo;re <code>XMODIFIERS</code>, <code>GTK_IM_MODULE</code> and
<code>QT_IM_MODULE</code>. Without setting them, the method won&rsquo;t work when typing into
the container.</p><h2 id=run-the-container>Run the container</h2><p>After setting up, start the container with <code>docker start wechat</code>. It would
trigger the following window to appear.</p><div align=center><img src=/images/wechat-start.png width=30% , height=30%></div><p>If it&rsquo;s the first log in, then a QR code would be displayed. Use your mobile
WeChat app to scan the code, just like the windows version of WeChat.</p><p>After the login, WeChat is ready for use! But be noticed that this isn&rsquo;t always
stable, and crashes sometimes. Use docker to restart when it crashes.</p></div></article><div class="license markdown-body"><blockquote><p>Unless otherwise noted, the content of this site is licensed under <a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>CC BY-NC-SA 4.0</a>.</p></blockquote></div></div><aside class="col-12 col-md-3 float-left sidebar"><div class="sidebar-item sidebar-pages"><h3>Pages</h3><ul><li><a href=/>Home</a></li><li><a href=/posts/about>About</a></li></ul></div><div class="sidebar-item sidebar-links"><h3>Links</h3><ul><li><a href=https://github.com target=_blank><span>Github</span></a></li></ul></div><div class="sidebar-item sidebar-tags"><h3>Tags</h3><div><span><a href=/tags/docker/>docker</a></span>
<span><a href=/tags/gem5/>gem5</a></span>
<span><a href=/tags/non-technical/>non-technical</a></span>
<span><a href=/tags/writting/>writting</a></span></div></div><div class="sidebar-item sidebar-toc"><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#docker-setup>Docker setup</a></li><li><a href=#find-the-docker-image>Find the docker image</a></li><li><a href=#create-docker-container>Create docker container</a><ul><li><a href=#set-up-a-sharing-folder>Set up a sharing folder</a></li><li><a href=#enable-input-method>Enable input method</a></li></ul></li><li><a href=#run-the-container>Run the container</a></li></ul></nav></div></aside></div><div class=btn><div class=btn-menu id=btn-menu><i class="iconfont icon-grid-sharp"></i></div><div class=btn-toggle-mode><i class="iconfont icon-contrast-sharp"></i></div><div class=btn-scroll-top><i class="iconfont icon-chevron-up-circle-sharp"></i></div></div><aside class=sidebar-mobile style=display:none><div class=sidebar-wrapper><div class="sidebar-item sidebar-pages"><h3>Pages</h3><ul><li><a href=/>Home</a></li><li><a href=/posts/about>About</a></li></ul></div><div class="sidebar-item sidebar-links"><h3>Links</h3><ul><li><a href=https://github.com target=_blank><span>Github</span></a></li></ul></div><div class="sidebar-item sidebar-tags"><h3>Tags</h3><div><span><a href=/tags/docker/>docker</a></span>
<span><a href=/tags/gem5/>gem5</a></span>
<span><a href=/tags/non-technical/>non-technical</a></span>
<span><a href=/tags/writting/>writting</a></span></div></div><div class="sidebar-item sidebar-toc"><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#docker-setup>Docker setup</a></li><li><a href=#find-the-docker-image>Find the docker image</a></li><li><a href=#create-docker-container>Create docker container</a><ul><li><a href=#set-up-a-sharing-folder>Set up a sharing folder</a></li><li><a href=#enable-input-method>Enable input method</a></li></ul></li><li><a href=#run-the-container>Run the container</a></li></ul></nav></div></div></aside></main><footer><div class="container-lg clearfix"><div class="col-12 footer"><span>&copy; 2022-2022
<a href=https://retrhelo.github.io>retrhelo</a>
| <a href=https://github.com/retrhelo/retrhelo.github.io>Source code</a>
| Powered by <a href=https://github.com/dsrkafuu/hugo-theme-fuji/ target=_blank>Fuji-v2</a> & <a href=https://gohugo.io/ target=_blank>Hugo</a></span></div></div></footer><script defer src=https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.27.0/components/prism-core.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/prismjs@1.27.0/plugins/autoloader/prism-autoloader.min.js></script>
<script defer src=/assets/js/fuji.min.js></script></body></html>